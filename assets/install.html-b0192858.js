import{_ as t,r as o,o as p,c as r,a as s,b as n,d as e,f as l}from"./app-2a9bb723.js";const c={},i=s("h2",{id:"安装",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#安装","aria-hidden":"true"},"#"),n(" 安装")],-1),d=s("h2",{id:"版本区别",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#版本区别","aria-hidden":"true"},"#"),n(" 版本区别")],-1),u=s("p",null,"常用版本分为四大阵营",-1),k={href:"http://nginx.org/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.nginx.com/",target:"_blank",rel:"noopener noreferrer"},v={href:"http://openresty.org/cn/",target:"_blank",rel:"noopener noreferrer"},m={href:"http://tengine.taobao.org/",target:"_blank",rel:"noopener noreferrer"},b=l(`<p>Nginx 的安装可以选择源码编译的方式也可以使用宝塔面板安装，本文采用的是源码编译安装。</p><h2 id="下载-nginx" tabindex="-1"><a class="header-anchor" href="#下载-nginx" aria-hidden="true">#</a> 下载 Nginx</h2><figure><img src="https://static.h7ml.cn/vitepress/assets/images/nginx/image-20220906163814476.png" alt="image-20220906163814476" tabindex="0" loading="lazy"><figcaption>image-20220906163814476</figcaption></figure><h2 id="使用源码编译安装" tabindex="-1"><a class="header-anchor" href="#使用源码编译安装" aria-hidden="true">#</a> 使用源码编译安装</h2><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> tar zxvf nginx<span class="token operator">-</span><span class="token number">1.22</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> cd nginx<span class="token operator">-</span><span class="token number">1.21</span><span class="token punctuation">.</span><span class="token number">6</span>
<span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token operator">/</span>configure <span class="token operator">-</span><span class="token operator">-</span>prefix<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token regex-literal"><span class="token regex">/local/nginx</span></span>
<span class="token comment"># --prefix=/usr/local/nginx 指安装路径是/usr/local/nginx，如果前面安装了宝塔Linux面板，这一步应该不会出现环境问题。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="如果出现警告或报错" tabindex="-1"><a class="header-anchor" href="#如果出现警告或报错" aria-hidden="true">#</a> 如果出现警告或报错</h3><p><strong>提示：</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code>checking <span class="token keyword">for</span> <span class="token constant">OS</span>
<span class="token operator">+</span> Linux <span class="token number">3.10</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">693</span><span class="token punctuation">.</span>el7<span class="token punctuation">.</span>x86_64 x86_64
checking <span class="token keyword">for</span> <span class="token constant">C</span> compiler <span class="token operator">...</span> not found
<span class="token punctuation">.</span><span class="token operator">/</span>configure<span class="token operator">:</span> error<span class="token operator">:</span> <span class="token constant">C</span> compiler cc is not found
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>安装 gcc</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> yum install <span class="token operator">-</span>y gcc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>提示：</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token operator">/</span>configure<span class="token operator">:</span> error<span class="token operator">:</span> the <span class="token constant">HTTP</span> rewrite <span class="token keyword">module</span> <span class="token class-name">requires</span> the <span class="token constant">PCRE</span> library<span class="token punctuation">.</span>
You can either disable the <span class="token keyword">module</span> <span class="token class-name">by</span> using <span class="token operator">-</span><span class="token operator">-</span>without<span class="token operator">-</span>http_rewrite_module
option<span class="token punctuation">,</span> or install the <span class="token constant">PCRE</span> library into the system<span class="token punctuation">,</span> or build the <span class="token constant">PCRE</span> library
statically from the source <span class="token keyword">with</span> nginx by using <span class="token operator">-</span><span class="token operator">-</span><span class="token keyword">with</span><span class="token operator">-</span>pcre<span class="token operator">=</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> option<span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>安装 perl 库</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> yum install <span class="token operator">-</span>y pcre pcre<span class="token operator">-</span>devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>提示：</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">.</span><span class="token operator">/</span>configure<span class="token operator">:</span> error<span class="token operator">:</span> the <span class="token constant">HTTP</span> gzip <span class="token keyword">module</span> <span class="token class-name">requires</span> the zlib library<span class="token punctuation">.</span>
You can either disable the <span class="token keyword">module</span> <span class="token class-name">by</span> using <span class="token operator">-</span><span class="token operator">-</span>without<span class="token operator">-</span>http_gzip_module
option<span class="token punctuation">,</span> or install the zlib library into the system<span class="token punctuation">,</span> or build the zlib library
statically from the source <span class="token keyword">with</span> nginx by using <span class="token operator">-</span><span class="token operator">-</span><span class="token keyword">with</span><span class="token operator">-</span>zlib<span class="token operator">=</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> option<span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>安装 zlib 库:</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> yum install <span class="token operator">-</span>y zlib zlib<span class="token operator">-</span>devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>出现这个代表安装成功</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code>Configuration summary
  <span class="token operator">+</span> using system <span class="token constant">PCRE</span> library
  <span class="token operator">+</span> OpenSSL library is not used
  <span class="token operator">+</span> using system zlib library

  nginx path prefix<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx&quot;</span></span>
  nginx binary file<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/sbin/nginx&quot;</span></span>
  nginx modules path<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/modules&quot;</span></span>
  nginx configuration prefix<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/conf&quot;</span></span>
  nginx configuration file<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/conf/nginx.conf&quot;</span></span>
  nginx pid file<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/logs/nginx.pid&quot;</span></span>
  nginx error log file<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/logs/error.log&quot;</span></span>
  nginx http access log file<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;/usr/local/nginx/logs/access.log&quot;</span></span>
  nginx http client request body temporary files<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;client_body_temp&quot;</span></span>
  nginx http proxy temporary files<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;proxy_temp&quot;</span></span>
  nginx http fastcgi temporary files<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;fastcgi_temp&quot;</span></span>
  nginx http uwsgi temporary files<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;uwsgi_temp&quot;</span></span>
  nginx http scgi temporary files<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;scgi_temp&quot;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="接下来执行" tabindex="-1"><a class="header-anchor" href="#接下来执行" aria-hidden="true">#</a> <strong>接下来执行</strong></h3><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@centos</span><span class="token operator">-</span>linux nginx<span class="token operator">-</span><span class="token number">1.22</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment"># make</span>
<span class="token punctuation">[</span>root<span class="token variable">@centos</span><span class="token operator">-</span>linux nginx<span class="token operator">-</span><span class="token number">1.22</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment"># make install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动-nginx" tabindex="-1"><a class="header-anchor" href="#启动-nginx" aria-hidden="true">#</a> <strong>启动 nginx</strong></h3><p><strong>进入安装好的目录 <code>/usr/local/nginx/sbin</code></strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@centos</span><span class="token operator">-</span>linux sbin<span class="token punctuation">]</span><span class="token comment"># ./nginx         # 启动</span>
<span class="token punctuation">[</span>root<span class="token variable">@centos</span><span class="token operator">-</span>linux sbin<span class="token punctuation">]</span><span class="token comment"># ./nginx -s stop     #快速停止</span>
<span class="token punctuation">[</span>root<span class="token variable">@centos</span><span class="token operator">-</span>linux sbin<span class="token punctuation">]</span><span class="token comment"># ./nginx -s quit    #优雅关闭，在退出前完成已经接受的连接请求</span>
<span class="token punctuation">[</span>root<span class="token variable">@centos</span><span class="token operator">-</span>linux sbin<span class="token punctuation">]</span><span class="token comment"># ./nginx -s reload    #重新加载配置</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关于防火墙" tabindex="-1"><a class="header-anchor" href="#关于防火墙" aria-hidden="true">#</a> 关于防火墙</h3><p><strong>关闭防火墙</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> systemctl stop firewalld<span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>禁止防火墙开机启动</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> systemctl disable firewalld<span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>放行端口</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> firewall<span class="token operator">-</span>cmd <span class="token operator">-</span><span class="token operator">-</span>zone<span class="token operator">=</span>public <span class="token operator">-</span><span class="token operator">-</span>add<span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp <span class="token operator">-</span><span class="token operator">-</span>permanent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>重启防火墙</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> firewall<span class="token operator">-</span>cmd <span class="token operator">-</span><span class="token operator">-</span>reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="安装成系统服务" tabindex="-1"><a class="header-anchor" href="#安装成系统服务" aria-hidden="true">#</a> 安装成系统服务</h3><p><strong>创建服务脚本</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> vi <span class="token operator">/</span>usr<span class="token operator">/</span><span class="token keyword">lib</span><span class="token operator">/</span>systemd<span class="token regex-literal"><span class="token regex">/system/nginx</span></span><span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>服务脚本内容</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
Description<span class="token operator">=</span>nginx <span class="token operator">-</span> web server
After<span class="token operator">=</span>network<span class="token punctuation">.</span>target remote<span class="token operator">-</span>fs<span class="token punctuation">.</span>target nss<span class="token operator">-</span>lookup<span class="token punctuation">.</span>target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Type<span class="token operator">=</span>forking
PIDFile<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token regex-literal"><span class="token regex">/logs/nginx</span></span><span class="token punctuation">.</span>pid
ExecStartPre<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>t <span class="token operator">-</span>c <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token regex-literal"><span class="token regex">/conf/nginx</span></span><span class="token punctuation">.</span>conf
ExecStart<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>c <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token regex-literal"><span class="token regex">/conf/nginx</span></span><span class="token punctuation">.</span>conf
ExecReload<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s reload
ExecStop<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s stop
ExecQuit<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s quit
PrivateTmp<span class="token operator">=</span><span class="token boolean">true</span>

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy<span class="token operator">=</span>multi<span class="token operator">-</span>user<span class="token punctuation">.</span>target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>重新加载系统服务</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> systemctl daemon<span class="token operator">-</span>reloactdad
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>启动服务</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> systemctl start nginx<span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>查看服务是否启动成功</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> sbin<span class="token punctuation">]</span> systemctl status nginx<span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://static.h7ml.cn/vitepress/assets/images/nginx/image-20220906171209767.png" alt="image-20220906171209767" tabindex="0" loading="lazy"><figcaption>image-20220906171209767</figcaption></figure><p><strong>开机启动</strong></p><div class="language-crystal line-numbers-mode" data-ext="crystal"><pre class="language-crystal"><code><span class="token punctuation">[</span>root<span class="token variable">@hadoop100</span> <span class="token operator">~</span><span class="token punctuation">]</span> systemctl enable nginx<span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,49);function h(x,y){const a=o("ExternalLinkIcon");return p(),r("div",null,[i,d,u,s("ul",null,[s("li",null,[s("p",null,[s("a",k,[n("Nginx 开源版 open in new window"),e(a)])])]),s("li",null,[s("p",null,[s("a",g,[n("Nginx plus 商业版 open in new window"),e(a)])])]),s("li",null,[s("p",null,[s("a",v,[n("openrestyopen in new window"),e(a)])])]),s("li",null,[s("p",null,[s("a",m,[n("Tengineopen in new window"),e(a)])])])]),b])}const _=t(c,[["render",h],["__file","install.html.vue"]]);export{_ as default};
